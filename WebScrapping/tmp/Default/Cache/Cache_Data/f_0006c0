!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=Object.defineProperty,t=(t,o,n)=>(((t,o,n)=>{o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n})(t,"symbol"!=typeof o?o+"":o,n),n);const o=new class{constructor(){t(this,"_our_document",null),t(this,"_our_node")}set document(e){this._our_document=e}get document(){const{_our_document:e}=this;return e??globalThis.document}set Node(e){this._our_node=e}get Node(){const{_our_node:e}=this;return e??globalThis.Node}useGlobalDocument(){this._our_document=null}useGlobalNode(){this._our_node=null}},n=["circle","clipPath","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","line","linearGradient","marker","mask","metadata","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tspan","use","view"],i="http://www.w3.org/2000/svg";let r=!1;const a=function(e,t,...a){const{document:s,Node:c}=o;if("function"==typeof e)return e(t??{},a);if(function(e){return n.includes(e)}(e))return function(e,t,...n){const{document:a,Node:s}=o;r||(r=!0,console.warn("texsaur SVG support is experimental!"));const c=a.createElementNS(i,e);let l;for(l of Object.keys(t)){l=l.toString();const e=t[l];c.setAttribute(l,e)}for(let o of n)Array.isArray(o)?c.append(...o):o instanceof s?c.appendChild(o):c.append(o);return c}(e,t??{},...a);const l=s.createElement(e);let d,u=t??{};for(d of Object.keys(u)){const t=(t,o)=>console.warn(e,`received incorrect value type for property '${d}': expected `,typeof t,"instead of",typeof o);d=d.toString();const o=u[d];switch(d){case"style":if("object"==typeof o)for(const[e,t]of Object.entries(o)){const o=e;"string"==typeof t&&(l.style[o]=t)}else{if("string"==typeof o)break;t("object | string",o)}continue}if(/^on/.test(d))"function"==typeof o?l.addEventListener(d.substring(2),u[d]):t("function",o);else try{const e=l;void 0===e[d]?l.setAttribute(d,o):e[d]=o}catch(p){console.error(`Could not set ${d} on ${l.tagName}`,p),t(typeof l[d],o)}}for(let o of a.flat())o instanceof c?l.appendChild(o):"string"!=typeof o&&(null==o?void 0:o[Symbol.iterator])?l.append(...o):l.append(o);return l};a.Fragment=function(e,t){return t};const s=new class{constructor(e){t(this,"data"),t(this,"observers",[]),this.data=e}dispatch(e){this.data={...this.data,...e},this.observers.forEach((e=>{e(this.data)}))}subscribe(e){this.observers.push(e),e(this.data)}get(e){return"*"===e?this.data:this.data[e]}}({currentPage:"login"}),c=(e,t,o,n)=>{try{var i=F(),r=window.location.href,a=G("_ht_clientid")?G("_ht_clientid"):"",c=G("token")&&G("_ht_clientid")?"logged_in":"non_logged_in";const d=s.get("client");var l="";"undefined"!=typeof pageTYPE&&(l=pageTYPE),window.dataLayer.push({event:e,widget_name:t,page_type:l,..."HT"===d?{section:i.article_section}:{section_name:i.article_section},sub_section_name:i.article_subsection,story_title:i.article_title,current_url:r,data_source:"non-amp",..."HT"===d?{logged_in_status:c}:{user_login_status:c},user_ID:a,cta_text:o,event_label_2:n})}catch(d){console.log(d)}},l="https://accounts.hindustantimes.com",d=/^[6789]\d{9}$/;var u="https://sso.hindustantimes.com",p={HT:1036,LM:1032,default:1036},g={HT:"Explore now",LM:"Check Credit score",LH:"Continue reading article"},m={HT:"Complete steps to discover a surprise!",LM:"Complete steps to discover a surprise!",LH:"सरप्राइज़ पाने के लिए सभी चरण पूरे करें!"},h={HT:"Continue reading article",LM:"Continue reading",LH:""},b={HT:"https://www.hindustantimes.com/my-ht",LM:"livemint.com/credit-score",LH:""},_={HT:["environment","world news","sports","india news","business","real estate","technology","cricket"],LM:["environment","world news","sports","india news","business","real estate","technology","cricket"],LH:["environment","world news","sports","india news","business","real estate","technology","cricket"],default:["environment","world news","sports","india news","business","real estate","technology","cricket"]},y={HT:"Personalized Reads, Your personalised destination, Exclusive Vouchers from 100+ Brands",LM:"Personalized Reads, Your personalised destination, Exclusive Vouchers from 100+ Brands, Get free Credit score",LH:"व्यक्तिगत न्यूज़ फीड, आपकी पर्सनल डेस्टिनेशन , डेली सरप्राइजेस",default:"Personalized Reads, Your personalised destination, Exclusive Vouchers from 100+ Brands"};let f;const v=()=>{setTimeout((()=>{f=setInterval((()=>{R()}),1e3),e(),document.querySelector("#eng_otp_boxes").addEventListener("paste",(e=>{var t=e.clipboardData.getData("text/plain").substring(0,6);for(let o=0;o<t.length;o++)document.querySelector("#otp"+(o+1)).value=t[o],console.log(t,"pasteData");C(),e.preventDefault()}))}),0);const e=()=>{const e=new AbortController;setTimeout((()=>{signal.abort()}),6e4),async function(){if("OTPCredential"in window){let{code:t,type:o}=await navigator.credentials.get({signal:e.signal,otp:{transport:["sms"]}});for(let e=0;e<t.length;e++)document.querySelector("#otp"+(e+1)).value=t[e];C()}else console.log("OTPCredential failed")}()};return a(Ce,{page:"obOtp"})},w=(e,t)=>{if(8==t.keyCode)e.previousSibling.focus();else{let t=e.value;t.length>1&&(e.value=t.substring(0,1)),e.nextSibling.focus()}};let k=!1;const C=()=>{k||(c("onboarding_journey_interaction","Enter Your Mobile Number Card","Otp Entered"),k=!0);let e=document.querySelector("#otp1").value,t=document.querySelector("#otp2").value,o=document.querySelector("#otp3").value,n=document.querySelector("#otp4").value,i=document.querySelector("#otp5").value,r=document.querySelector("#otp6").value;""!=e&&""!=t&&""!=o&&""!=n&&""!=i&&""!=r||x()},x=()=>{document.querySelector(".sso-otp-enter-box-wrap").classList.remove("error"),document.querySelector("#eg-otp-inp-err").innerHTML=""},T=()=>{let e="";for(let t=1;t<7;t++)e+=document.querySelector(`#otp${t}`).value;return e},S=e=>{document.querySelector(".sso-otp-enter-box-wrap").classList.add("error");let t=e||"Sorry, we are not able to verify the OTP";document.querySelector("#eg-otp-inp-err").innerHTML=t};var L=!1;const N=()=>{const e=e=>document.getElementById(e);return a("div",{className:"inpHolder  sso-otp-enter-box-wrap byemail eg_mid_textbox eg_otp error1",id:"otpfield"},a("input",{type:"tel",id:"otp1",oninput:()=>(()=>{const e=document.querySelector("#otp1").value.substring(0,6);for(let t=0;t<e.length;t++)document.querySelector("#otp"+(t+1)).value=e[t];C()})(),onkeyup:t=>[C(),w(e("otp1"),t)],pattern:"^[0-9]$;",className:"inp otp otp-no eg_text_otp"}),a("input",{type:"tel",id:"otp2",oninput:()=>x(),onkeyup:t=>[C(),w(e("otp2"),t)],pattern:"^[0-9]$;",className:"inp otp otp-no eg_text_otp"}),a("input",{type:"tel",id:"otp3",oninput:()=>x(),onkeyup:t=>[C(),w(e("otp3"),t)],pattern:"^[0-9]$;",className:"inp otp otp-no eg_text_otp"}),a("input",{type:"tel",id:"otp4",oninput:()=>x(),onkeyup:t=>[C(),w(e("otp4"),t)],pattern:"^[0-9]$;",className:"inp otp otp-no eg_text_otp"}),a("input",{type:"tel",id:"otp5",oninput:()=>x(),onkeyup:t=>[C(),w(e("otp5"),t)],pattern:"^[0-9]$;",className:"inp otp otp-no eg_text_otp"}),a("input",{type:"tel",id:"otp6",oninput:()=>x(),onkeyup:t=>[C(),w(e("otp6"),t)],pattern:"^[0-9]$;",className:"inp otp otp-no eg_text_otp"}))},O=()=>{const e=e=>document.getElementById(e);return a("div",{className:"inpHolder  sso-otp-enter-box-wrap byemail eg_mid_textbox eg_otp error1",id:"otpfield"},a("input",{type:"number",id:"otp1",maxLength:1,oninput:()=>x(),onkeyup:t=>[C(),w(e("otp1"),t)],className:"inp otp otp-no"}),a("input",{type:"number",id:"otp2",maxLength:1,oninput:()=>x(),onkeyup:t=>[C(),w(e("otp2"),t)],className:"inp otp otp-no"}),a("input",{type:"number",id:"otp3",maxLength:1,oninput:()=>x(),onkeyup:t=>[C(),w(e("otp3"),t)],className:"inp otp otp-no"}),a("input",{type:"number",id:"otp4",maxLength:1,oninput:()=>x(),onkeyup:t=>[C(),w(e("otp4"),t)],className:"inp otp otp-no"}),a("input",{type:"number",id:"otp5",maxLength:1,oninput:()=>x(),onkeyup:t=>[C(),w(e("otp5"),t)],className:"inp otp otp-no"}),a("input",{type:"number",id:"otp6",maxLength:1,oninput:()=>x(),onkeyup:t=>[C(),w(e("otp6"),t)],className:"inp otp otp-no"}))};let E="";const I=async e=>{const t=s.get("client"),o=l+"/mobile/loggedIn/generateOtp",n={cellNumber:"91"+E,otpFor:"AUTHENTICATION",referrer:t,newsletterMergeRequest:!0};D&&(n.cibilConsent=!0);let i={Authorization:G("token"),"X-Client":p[t]?p[t]:p.default,"Content-Type":"application/json"};try{let t=await fetch(o,{method:"POST",headers:i,body:JSON.stringify(n)}),l=await t.json();if(l.body.success)e||(s.dispatch({currentPage:"obOtp"}),navigator.userAgent.match(/chrome|chromium|CriOS/i)?null==(r=document.getElementById("eng_otp_boxes"))||r.append(a(N,null)):null==(c=document.getElementById("eng_otp_boxes"))||c.append(a(O,null)));else{"PH-001"==l.body.message.code&&J("Another account with this phone number exists.");let e=l&&l.message?l.message.text:" ";console.log(e)}}catch(d){console.log(JSON.stringify(d))}var r,c},P=(e,t,o)=>{var n=new Date;n.setTime(n.getTime()+31536e6);var i=";expires ="+n.toGMTString(),r=";domain =.hindustantimes.com;path=/;Secure=true";document.cookie="token="+e+i+r,document.cookie="_ht_clientid="+t+i+r,document.cookie="name="+o+i+r,document.cookie="ht_token="+e+i+r},H=(e,t,o)=>{try{var n={};n.clientID=G("_ht_clientid")?G("_ht_clientid"):"",n.type="Click",n.step=e,n.action=t,n.name=G("name")?G("name"):"",ne||(n.mobile_unverified=!0),n.preferences=o,(E||K)&&ne&&(n.mobile=E||K),n.cdp_platform="mWeb",n.cdp_user_loggedIn=!(!G("token")||!G("_ht_clientid")),n.cdp_refferer=s.get("client"),"undefined"!=typeof dapTracker?dapTracker.track("LoginOnboardingActivity",n,"event"):console.log("dapTracker is not available")}catch(i){console.log(i)}};let M=1,j=0;var q=!0,D=!1,A=!0;const $=()=>{X();const e=Z.shift();e&&""!=e||(oe&&ne&&ie&&se(!0,!0),le()),s.dispatch({currentPage:e})},B=e=>{A=e},R=()=>{let e=document.getElementById("eg-sec");if(e){if(e=e.innerHTML,e){let t=e>10?--e:e>0?"0"+--e:U();document.getElementById("eg-sec").innerHTML=t||"00"}}else clearInterval(f)},U=()=>{document.querySelector(".eg-otp_msg").style.display="none",document.querySelector(".eg_resend_otp").style.display="block",document.getElementById("eg-sec").innerHTML="00",clearInterval(f),clearInterval(te)};let Y;const F=()=>{try{if(Y)return Y;let e=new URL(window.location.href).pathname.split("/"),t=e[e.length-1].split("-"),o=null;t.length>1&&(o=t[t.length-1].match(/\d+/)?t[t.length-1].match(/\d+/)[0]:null),t.pop();let n=t.join(" ");Y={article_title:n||null,article_section:e[1]?e[1]:null,article_subsection:4===e.length?e[2]:null,article_id:o||null}}catch(e){return console.log(e),{article_title:null,article_section:null,article_subsection:null,article_id:null}}return Y};function G(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){let e=o[n];for(;" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(t))return e.substring(t.length,e.length)}return null}const z=(e,t)=>{s.get("rootElement").innerHTML="",""!=e&&c(e,t),window.open(window.location.href,"_self")},J=e=>{let t=document.getElementById("eg-name-inp-err"),o=e||"";return""===E?o="This is a mandatory field":E.length<10?o="Please enter a valid 10 digit number":d.test(E)||(o="Not a valid phone."),""===o||(t.textContent=o,re(),!1)},V=e=>{let t=e.split(" ");return t[0]?t[0].charAt(0).toUpperCase()+t[0].slice(1):"Reader"},X=()=>{j+=1,M=Math.ceil(100*j/ee)};var W="https://www.hindustantimes.com/ht-img/sso/prod/onboarding/images/profile.png",K="",Q="Reader",Z=[];let ee,te,oe=!1,ne=!1,ie=!1;const re=()=>{document.querySelector(".eg_mid_textbox").classList.add("eg_valid"),document.querySelector(".eg_text").classList.add("eg_validation"),document.querySelector("#eg-name-inp-err").style.display="block"},ae=async e=>{const t=s.get("client");let o=u+"/sso/api/v1/user/update",n={"X-Client":p[t]?p[t]:p.default,Authorization:G("token")?G("token"):"","Content-Type":"application/json"};const i={name:e,referrerCode:s.get("client")?s.get("client"):"HT",onboardingViewed:!0};D&&(i.cibilConsent=!0,B(!1));try{let t=await fetch(o,{method:"POST",headers:n,body:JSON.stringify(i)}),r=await t.json();if(1==r.success&&r.data)Q=e,ue("name"),(e=>{var t=new Date;t.setTime(t.getTime()+31536e6);var o=";expires ="+t.toGMTString();document.cookie="name="+e+o+";domain =.hindustantimes.com;path=/;Secure=true"})(e),H("Name","Submit"),$();else{let e=r&&r.message&&r.message?r.message:"";console.log("Something went wrong while updating name : "+getStringObject(e))}}catch(r){console.log(JSON.stringify(r))}},se=async(e,t)=>{const o=s.get("client");let n=u+"/sso/api/v1/user/update",i={"X-Client":p[o]?p[o]:p.default,Authorization:G("token")?G("token"):"","Content-Type":"application/json"};const r={referrerCode:o||"HT",onboardingViewed:e,onboardingCompleted:t};try{let o=await fetch(n,{method:"POST",headers:i,body:JSON.stringify(r)}),a=await o.json();if(1==a.success&&a.data)console.log("onboardingViewed: "+e+", onboardingCompleted: "+t);else{let e=a&&a.message&&a.message?a.message:"";console.log("Something went wrong while updating name : "+getStringObject(e))}}catch(a){console.log(JSON.stringify(a))}},ce=e=>{var t=new Date;t.setTime(t.getTime()+18e5);var o=";expires ="+t.toGMTString();document.cookie="unlockContainer="+e+o+";domain =.hindustantimes.com;path=/;Secure=true"},le=async(e,t)=>{""!=e&&"onboarding_journey_close_clicked"==e&&c(e,t),s.get("campaignId")&&s.get("campaignName")&&s.get("campaignType")||z();try{let{tnc:e,redemptionUrl:t,vendorId:o,vendorLogo:n,voucherCategory:i,description:r,validity:a,couponCode:c,howToAvail:l,color1:d,color2:u,categoryIcon:p,cardTextColor:g}=await de();window.bottomSlider?window.bottomSlider.render({element:s.get("rootElement"),client:s.get("client"),modeType:"Login Journey",bannerImageURL:n,sdkType:"confettiPopup",isOnboarding:!0,cardColor1:d,cardColor2:u,vendorName:o,voucherCategory:i,categoryIcon:p,description:r,validity:a,couponCode:c,availOfferLink:t,termsAndConditionsUrl:e,howToRedeemUrl:l,cardTextColor:g,sdk_redirect_url:s.get("sdk_redirect_url"),obUserName:Q,obUserImg:W}):(console.log("Failed to load bottom slider sdk"),z())}catch(o){console.log("no voucher allocation")}},de=async()=>{const e=s.get("client");let t=u+"/vms/api/v1/promo/fulfillment";const o={"Content-Type":"application/json","X-Client":p[e]?p[e]:p.default,Authorization:G("token")},n={campaignId:s.get("campaignId"),name:s.get("campaignName"),type:s.get("campaignType")};try{let e=await fetch(t,{method:"POST",headers:o,body:JSON.stringify(n)}),i=await e.json();if(i.success&&i.data){if(ce(!0),i.data&&!(i.data.length<1)){return((e,t,o)=>{try{var n={};n.clientID=G("_ht_clientid")?G("_ht_clientid"):"",n.type="Allocation",n.source="Onboarding",n.voucherID=e,n.brand=t,n.category=o,"undefined"!=typeof dapTracker?dapTracker.track("VoucherActivity",n,"event"):console.log("dapTracker is not available")}catch(i){console.log(i)}})(i.data[0].voucherConfigDTO.voucherId,i.data[0].voucherConfigDTO.vendorId,i.data[0].voucherConfigDTO.voucherCategory),{tnc:i.data[0].voucherConfigDTO.tnc,redemptionUrl:i.data[0].voucherConfigDTO.redemptionUrl,vendorId:i.data[0].voucherConfigDTO.vendorId,vendorLogo:i.data[0].voucherConfigDTO.vendorLogo,voucherCategory:i.data[0].voucherConfigDTO.voucherCategory,description:i.data[0].voucherConfigDTO.description,validity:i.data[0].voucherConfigDTO.endDate,couponCode:i.data[0].voucherCode,howToAvail:i.data[0].voucherConfigDTO.howToAvail,color1:i.data[0].voucherConfigDTO.voucherCardConfig.color1,color2:i.data[0].voucherConfigDTO.voucherCardConfig.color2,categoryIcon:i.data[0].voucherConfigDTO.categoryIcon,cardTextColor:i.data[0].voucherConfigDTO.voucherCardConfig.textColor}}s.dispatch({currentPage:"congratulations"})}else console.log("Error allocating the voucher to the user:",i),ce(!1),s.dispatch({currentPage:"congratulations"})}catch(i){console.error("Something went wrong:",i),ce(!1),s.dispatch({currentPage:"congratulations"})}},ue=e=>{"name"==e?oe=!0:"mobile"==e?ne=!0:"topic"==e&&(ie=!0)},pe=({client:e,currentPage:t})=>{const o=()=>{window.open("https://www.livemint.com/static/creditscore-terms-and-conditions","_blank")};return a("div",{class:"eg_lightbox_chkbox"},a("label",{class:"chkbox_text"},a("input",{type:"checkbox",id:"cibilConcentcheckbox",checked:q,onchange:()=>(e=>{1==document.getElementById("cibilConcentcheckbox").checked?(A=!1,D=!0,q=!0,c("onboarding_journey_interaction","name"===e?"Enter Your Name Card":"Enter Your Mobile Number Card","CIBIL Consent Selected"),H("name"===e?"Name":"Mobile number","CIBIL Consent Selected")):(A=!0,D=!1,q=!1,c("onboarding_journey_interaction","name"===e?"Enter Your Name Card":"Enter Your Mobile Number Card","CIBIL Consent DeSelected"),H("name"===e?"Name":"Mobile number","CIBIL Consent DeSelected"))})(t)}),a("span",{class:"checkmark"})),"HT"===e||"LM"===e?a("span",{class:"egchk_para"},"I agree to share my details and authorise HT Digital Streams to access my CRIF High Mark credit profile, and accept the ",a("a",{onclick:()=>o(),class:`${e}_eg_color`},"Terms & Conditions.")):a("span",{class:"egchk_para"},"अपनी जानकारी साझा करने के लिए सहमत हूँ और HT Digital Streams को मेरी CRIF High Mark credit profile देखने के लिए अधिकृत करता हूँ, और ",a("a",{onclick:()=>o(),class:`${e}_eg_color`},"नियम व शर्तें")," को स्वीकार करता हूँ।"))},ge=({client:e})=>{var t=!1;let o="LH"===e?"यहाँ अपना नाम लिखें":"Type your name here";return a(a.Fragment,null,a("div",{class:`eg_mid_textbox ${e}_eg_border`},a("input",{type:"text",placeholder:o,class:"eg_text",id:"eg_name_input",onclick:()=>{var e;e="Name Entered",t||c("onboarding_journey_interaction","Enter Your Name Card",e),t=!0,document.querySelector("#eg-name-inp-err").style.display="none",document.querySelector(".eg_mid_textbox").classList.remove("eg_valid"),document.querySelector(".eg_text").classList.remove("eg_validation")}}),a("span",{class:"eg-validation_msg",id:"eg-name-inp-err",style:{display:"none"}},"LH"===e?"यह फ़ील्ड भरना अनिवार्य है।":"This is a mandatory field")),a("button",{class:`eg_proceed ${e}_eg_background`,onclick:()=>{!function(){let e=document.getElementById("eg_name_input").value;if(e.length<3)return document.querySelector(".eg_mid_textbox").classList.add("eg_valid"),document.querySelector(".eg_text").classList.add("eg_validation"),void(document.querySelector("#eg-name-inp-err").style.display="block");c("onboarding_journey_interaction","Enter Your Name Card","Proceed Clicked"),ae(e)}()}},"LH"===e?"आगे बढ़ें":"Proceed"),A?a(pe,{client:e,currentPage:"name"}):"")},me=({client:e})=>{var t=!1;const o=e=>{t||c("onboarding_journey_interaction","Enter Your Mobile Number Card",e),t=!0};let n="LH"===e?"यहां अपना नंबर दर्ज करें":"Enter number here";return a(a.Fragment,null,a("div",{class:`eg_mid_textbox eg_number ${e}_eg_border`},a("span",{class:"eg-number_initial"},"+91"),a("input",{type:"tel",placeholder:n,maxlength:"10",autofocus:!0,autoComplete:"off",value:E,id:"eg_mobile_input",class:"eg_text",onclick:()=>{o("Mobile Number Entered"),document.querySelector("#eg-name-inp-err").style.display="none",document.querySelector(".eg_mid_textbox").classList.remove("eg_valid"),document.querySelector(".eg_text").classList.remove("eg_validation")},onchange:e=>(e=>{E=e.target.value})(e)}),a("span",{class:"eg-validation_msg",id:"eg-name-inp-err",style:{display:"none"}},"LH"===e?"यह फ़ील्ड भरना अनिवार्य है।":"This is a mandatory field")),a("button",{class:`eg_proceed ${e}_eg_background`,onclick:()=>{o("Get Otp Clicked"),c("onboarding_journey_interaction","Enter Your Mobile Number Card","Get Otp Clicked"),H("Mobile number","Send OTP"),J()&&I(!1)}},"LH"===e?"ओटीपी प्राप्त करें":"Get OTP"),A?a(pe,{client:e,currentPage:"mobile"}):"")},he=({client:e})=>a(a.Fragment,null,a("div",{class:"eg_mid_textbox",id:"eng_otp_boxes"}),a("div",{style:{width:"100%",display:"flex","align-items":"center","justify-content":"space-between"}},a("div",{class:"eg-valid_otp",id:"eg-otp-inp-err",style:{display:"block"}}),a("div",{class:"eg_resend_otp",style:{display:"none"},onclick:()=>(()=>{x(),document.querySelector("#eg-sec").innerHTML="30",document.querySelector(".eg-otp_msg").style.display="block",document.querySelector(".eg_resend_otp").style.display="none",te=setInterval((()=>{R()}),1e3),c("onboarding_journey_interaction","Enter Your Mobile Number Card","Resend Otp Clicked"),H("OTP","Resend OTP");for(let e=1;e<7;e++)document.querySelector("#otp"+e).value="";I(!0)})()},a("a",{href:"#",class:`${e}_eg_color`},"Resend OTP"))),a("div",{class:"eg-otp_msg",style:!0},a("span",null,"LH"===e?"ओटीपी प्राप्त नहीं हुआ?":"Didn't recieve OTP? Retry in"),a("span",{class:"eg-timer_otp"},"00:",a("span",{id:"eg-sec"},"30")),a("span",null,"LH"===e?"में पुनः प्रयास करें":"")),a("button",{class:`eg_proceed ${e}_eg_background`,onclick:()=>(async()=>{const e=s.get("client");if(T().length<6)return void S("This is a mandatory field");let t=G("token");const o=G("_ht_fp")?G("_ht_fp"):"";if(1!=L){L=!0;let i=l+"/mobile/loggedIn/verifyOtp",r={cellNumber:"91"+E,otp:T(),otpFor:"AUTHENTICATION",referrer:e,newsletterMergeRequest:!0};D&&(r.cibilConsent=!0,B(!1));let a={"Content-Type":"application/json","X-Client":p[e]?p[e]:p.default,Authorization:t,_ht_fp:o};try{let e=await fetch(i,{method:"POST",headers:a,body:JSON.stringify(r)}),o=await e.json();if(console.log(o),o.body.success){let e=o.body.data.name,n=o.body.data.clientId;t=o.body.data.authenticationToken||t,ue("mobile"),c("onboarding_journey_interaction","Enter Your Mobile Number Card","Otp Next Clicked"),H("OTP","Verify OTP"),P(t,n,e),U(f),$()}else{let e=o&&o.body.message?o.body.message.text:"Please enter valid OTP";S(e),U(f)}L=!1}catch(n){U(),S(),L=!1}}})()},"LH"===e?"आगे बढ़ें":"Next")),be=(e,t)=>{let o=[];for(let n=0;n<e.length;n+=t)o.push(e.slice(n,n+t));return o},_e=e=>e.charAt(0).toUpperCase()+e.slice(1),ye=e=>{let t=document.querySelectorAll(`#eg-${ve(e)}-subtopics`);for(let o=0;o<t.length;o++){let e=t[o].querySelectorAll("input");for(let t=0;t<e.length;t++)if(e[t].checked)return!0}return!1},fe=(e,t,o)=>{let n=document.querySelectorAll(`#eg-${ve(e)}-subtopics`);n.forEach((e=>{e.classList.add(t)})),setTimeout((()=>{n.forEach((e=>{e.remove()}))}),o)},ve=e=>e.replace(/\s/g,"");let we=[];const ke=({client:e})=>{const t=be(Ne,3);let o=new Set,n=new Map,i={};var r=!1;const l=async e=>{let t=await(async e=>{let t="https://personalize.hindustantimes.com/popular-topics-ht?htfpId="+(G("_ht_fp")?G("_ht_fp"):"1709288555155")+"&propertyId="+(s.get("client").toLowerCase()||"ht")+"&platformId=web&section="+e+"&days=1";const o={"Content-Type":"application/json"};try{let e=await fetch(t,{method:"GET",headers:o}),n=await e.json();return n[0].items?n[0].items:(console.log("Request was not successful:",n),[])}catch(n){return console.error("Error fetching subtopics:",n),[]}})(e);return t&&(t=t.filter((e=>!Ne.includes(e)&&!o.has(e)&&(o.add(e),!0)))),t},d=async(e,t,o)=>{if(i[e]||(i[e]=await l(e)),i[e]&&i[e].length>1){o&&fe(o,"eg-removeAnimationDown",500),((e,t,o,n)=>{let i=t;e.forEach(((e,t)=>{let r=document.createElement("ul");r.className="eg-childTopics",requestAnimationFrame((()=>{r.classList.add("eg-topicAnimation")})),r.id=`eg-${ve(o)}-subtopics`,e.forEach((e=>{let t=document.createElement("li");t.id=`eg-${ve(e)}-item`;let o=document.createElement("input");o.type="checkbox",o.id=`eg-${ve(e)}-subtopic`,o.onclick=()=>n(e);let i=document.createElement("label");i.className="eg-topics-label",i.htmlFor=`eg-${ve(e)}-subtopic`;let a=document.createElement("img");a.src="https://www.hindustantimes.com/static-content/1y/ht/personalisation/tick_icon.png",i.appendChild(a),i.appendChild(document.createTextNode(_e(e))),t.appendChild(o),t.appendChild(i),r.appendChild(t)})),i.insertAdjacentElement("afterend",r),i=r}))})(be(i[e],3),t,e,u),n.set(t,e)}},u=async e=>{var t;if(we.includes(e)?we=we.filter((t=>t!==e)):we.push(e),t="Topics selected",r||c("onboarding_journey_interaction","Select Topics Card",t),r=!0,!Ne.includes(e))return;const o=document.getElementById(`eg-${ve(e)}-item`).closest("ul");document.getElementById(`eg-${ve(e)}-topic`).checked?n.get(o)?n.get(o)!==e&&(ye(n.get(o))||d(e,o,n.get(o))):d(e,o):n.get(o)!=e||ye(e)||(fe(e,"eg-removeAnimationUp",1e3),n.delete(o))};return a("div",{class:`eg_mid_topics ${e}_eg_topics`},t.map(((e,t)=>a("ul",{id:`eg-topics-row#${t+1}`},e.map((e=>a("li",{id:`eg-${ve(e)}-item`},a("input",{type:"checkbox",id:`eg-${ve(e)}-topic`,onclick:()=>u(e)}),a("label",{className:"eg-topics-label",htmlFor:`eg-${ve(e)}-topic`},a("img",{src:"https://www.hindustantimes.com/static-content/1y/ht/personalisation/tick_icon.png"}),_e(e)))))))))},Ce=e=>{let t,o=W&&""!=W?W:"https://www.hindustantimes.com/ht-img/sso/prod/onboarding/images/profile.png",n=s.get("client"),i=Q||"Reader",r="Name",l="Enter Your Name Card",d="LH"===n?"नमस्ते,":"Hello,",g="LH"===n?"हम आपको किस नाम से पुकारें?":"What should we call you?",h=j+"/"+ee,b=M+"%",_="";if("namePage"==e.page)t=a(ge,{client:n});else if("obMobileInp"==e.page)l="Enter Your Mobile Number Card",r="Mobile number",d="Welcome "+V(i)+", thanks for logging in! Let's tailor your experience.",_="स्वागत है "+V(i)+", लॉग इन करने के लिए धन्यवाद! चलिए आपके अनुभव को व्यक्तिगत बनाते हैं।",g="LH"===n?"कृपया अपना फ़ोन नंबर शेयर करें":"Please share your phone number",t=a(me,{client:n});else if("obOtp"==e.page){l="Enter Your Mobile Number Card",d="",_="",r="OTP",g="LH"===n?E+" पर भेजा गया ओटीपी दर्ज करें":"Enter the OTP we have sent to "+E,t=a(he,{client:n})}else"topics"==e.page&&(l="Select Topics Card",r="Preferences",g="Pick your favorite topics to personalize your experience",setTimeout((()=>{document.querySelector(".eg_proceed").style.display="block",document.querySelector(".eg_mid_label").style.display="none"}),0),t=a(ke,{topics:e.topics,client:n}));const y=()=>{we.length>0&&((async e=>{const t=s.get("client"),o=G("token");let n=u+"/sso/api/v1/user/"+t+"/topics";const i={"Content-Type":"application/json","X-Client":p[t]?p[t]:p.default,Authorization:o};try{let t=await fetch(n,{method:"POST",headers:i,body:JSON.stringify(e)}),o=await t.json();return 1==o.success?(ue("topic"),$(),o.data):(console.log("Request was not successful:",o),null)}catch(r){return console.error("Error submitting subtopics:",r),null}})(we),c("onboarding_journey_interaction","Select Topics Card","Submit Clicked",we),H("Preferences","Submit preferences",we))};return a("div",{id:"eg-lightbox",class:"eg_lightbox"},a("div",{class:`eg_lightbox-content ${n}_background_image`},a("span",{class:"eg_close",onclick:()=>{H(r,"Close"),le("onboarding_journey_close_clicked",l)}}),a("div",{class:"eg_container"},a("div",{class:"eg_top_header"},a("div",{class:"eg_top_header_left"},a("span",null,m[n]),a("span",null,a("img",{src:"https://www.hindustantimes.com/ht-img/sso/prod/onboarding/images/question.png"}))),a("div",{class:"eg_top_header_right"},h)),a("div",{id:"eg-myProgress",class:"eg_progressBar"},a("div",{id:"eg-myBar",class:`eg_myBar ${n}_eg_progressBar`,style:{width:b}})),a("div",{class:"eg_mid_container"},a("div",{class:"eg_mid_profile"},a("img",{src:o,style:{width:"64px",height:"64px"}})),a("div",{class:"eg_mid_label"},"LH"===n?_:d),a("div",{class:"eg_mid_question"},g),t)),a("button",{class:`eg_proceed eg_submit ${n}_eg_background`,style:{display:"none"},onclick:()=>y()},"Submit")))},xe=()=>(c("onboarding_journey_viewed","Enter Your Name Card"),a(Ce,{page:"namePage"})),Te=()=>(c("onboarding_journey_viewed","Enter Your Mobile Number"),a(Ce,{page:"obMobileInp"})),Se=()=>(c("onboarding_journey_viewed","Select Topics Card"),a(Ce,{page:"topics"})),Le=()=>{const e=s.get("client");Ee||c("onboarding_journey_viewed","Login Congratulations Viewed"),Ie();let t=s.get("obUserName")?s.get("obUserName"):Q||"Reader";t=V(t);let o=t.length>6?t.substring(0,6)+"...":t;const n=s.get("obUserImg")?s.get("obUserImg"):W||"https://www.hindustantimes.com/ht-img/sso/prod/onboarding/images/profile.png";setTimeout((()=>{document.getElementById("eg-lightbox1").style.display="flex"}),500);let i=Oe.split(",");return a("div",{id:"eg-lightbox1",class:"eg-lightbox1"},a("div",{class:"eg-lightbox-content1"},a("div",{class:"eg-congrats_container"},a("div",null,a("img",{class:"eg-tickGif",src:"https://www.hindustantimes.com/ht-img/sso/prod/onboarding/images/tick_gif.gif"})),a("h3",null,"LH"===e?"बधाई हो ":"Congratulations",t),a("p",null,"LH"===e?"अब आपके पास है: ":"You are all set! Here's what you've unlocked:"),a("ul",null,i.map(((e,t)=>a("li",{key:t},a("div",{class:"eg-check"},a("img",{src:"https://www.hindustantimes.com/ht-img/sso/prod/onboarding/images/tick1.png",style:{width:"16px",height:"12px"}})),e)))),a("button",{class:`eg-congrats_btn ${e}_eg_background`,onclick:()=>{c("onboarding_journey_interaction","Login Congratulations Viewed","Explore Now Clicked"),(()=>{const e=s.get("client");let t=b[e];G("token")&&G("_ht_clientid")&&(t?location.href=t:location.reload())})()}},g[e]),a("button",{class:`eg-continue_btn ${e}_eg_color`,onclick:()=>{c("onboarding_journey_interaction","Login Congratulations Viewed","Continue Reading Article Clicked"),z()}},h[e])),"HT"===e?a(a.Fragment,null,a("div",{class:"eg-profile_arrow"}),a("div",{class:"eg_profile_mb"},a("div",{class:"eg-profile_inner"},a("div",null,a("img",{src:n,style:{width:"32px",height:"32px",borderRadius:"100%"}})),a("div",null,o)))):""))};var Ne=[],Oe="",Ee=!1;const Ie=()=>{Ee=!0};function Pe(e){const t=s.get("client");if("congratulations"!=e){se(!0,!1);const t=async()=>{const{userNameData:t,userMobileData:o,isPreferenceSet:n,cibilConsent:i}=await(async()=>{const e=s.get("client");let t=u+"/sso/api/v1/user/fetchData";const o={"Content-Type":"application/json","X-Client":p[e]?p[e]:p.default,Authorization:G("token")};try{let e=await fetch(t,{method:"GET",headers:o}),n=await e.json();if(1==n.success&&n.data)return K=n.data.cellNumber,Q=n.data.name,n.data.image&&""!=n.data.image&&(W=n.data.image),{userNameData:n.data.name,userMobileData:n.data.cellNumber,isPreferenceSet:n.data.onBoardingTopicSaved,cibilConsent:n.data.cibilConsent};console.log("Something went wrong while updating name : "+getStringObject(n))}catch(n){console.log(JSON.stringify(n))}})();var r;null==(r=i)||null==r||!1===r?(A=!0,q=!0,D=!0):(A=!1,q=!0,D=!0),""!=t&&"READER"!=t.toUpperCase()&&ue("name"),null!=o&&""!=o&&ue("mobile"),n&&ue("topic"),((e,t,o,n)=>{const i=s.get("client");if(t||Z.push("namePage"),o||Z.push("obMobile"),n||"HT"!==i||Z.push("obTopic"),ee=Z.length,e){const t=Z.indexOf(e);t>-1&&Z.splice(t,1),Z.unshift(e)}else $()})(e,oe,ne,ie)};t()}const o=a("div",null," ");return s.subscribe((async({currentPage:e})=>{if("namePage"===e&&(o.innerHTML="",o.append(a(xe,null))),"obTopic"===e){let{result:e}=await(async()=>{const e={"Content-Type":"application/json"};try{let t=await fetch("https://personalize.hindustantimes.com/popular-topic-sections-ht?propertyId=ht&platformId=web",{method:"GET",headers:e}),o=await t.json();return"success"==o.status?{result:o.items}:(console.log("Request was not successful:",o),[])}catch(t){return console.error("Error fetching preferences:",t),[]}})();Ne=e&&e.length>0?e:_[t],o.innerHTML="",o.append(a(Se,null))}if("obMobile"===e&&(o.innerHTML="",o.append(a(Te,null))),"obOtp"===e&&(o.innerHTML="",o.append(a(v,null))),"congratulations"===e){let{benefits:e}=await(async()=>{let e=G("ht_cdp_echo_campaignId")?G("ht_cdp_echo_campaignId"):"onboarding_campaign_123";if("onboarding_campaign_123"==e)return{benefits:""};let t="https://cdpecho.hindustantimes.com/api/v3/user/benefit/"+e;try{let e=await fetch(t,{method:"GET"}),o=await e.json();return o&&o.benefits?{benefits:o.benefits}:(console.log("Something went wrong while getting user benefits data : "+getStringObject(o)),{benefits:""})}catch(o){return console.log(JSON.stringify(o)),{benefits:""}}})();Oe=e&&""!=e?e:y[t],o.innerHTML="",o.append(a(Le,null))}})),o}setTimeout((()=>{(e=>{const t=document.createElement("script");t.src=e,document.head.appendChild(t)})("https://images.hindustantimes.com/sso/prod/bottom-sdk/bottom-slider-sdk.js")}),1e3);window.onboarding={render:function(e){const{element:t,client:o,funnel_entry:n,SDK_Callback:i,sdk_redirect_url:r,currentPage:a,campaignId:c,campaignName:l,campaignType:d,congratulatePopup:u,obUserName:p,obUserImg:g}=e;(e=>{const t=document.createElement("style");t.appendChild(document.createTextNode(e)),document.head.appendChild(t)})('.eg_lightbox_chkbox{display:flex;text-align:left}.eg_lightbox_chkbox .egchk_para a{color:#00b1cd;cursor:pointer}.eg_lightbox_chkbox .chkbox_text{position:relative;cursor:pointer}.eg_lightbox_chkbox .egchk_para{font-size:12px;color:#616161;padding-left:25px;line-height:16.8px}.eg_lightbox_chkbox .chkbox_text input{position:absolute;opacity:0;cursor:pointer;left:0}.eg_lightbox_chkbox .checkmark{position:absolute;top:3px;left:0;height:16px;width:16px;background-color:#ccc;border-radius:3px}.eg_lightbox_chkbox .chkbox_text input:checked~.checkmark{background-color:#00b1cd;border-radius:3px}.eg_lightbox_chkbox .checkmark:after{content:"";position:absolute;display:none}.eg_lightbox_chkbox .chkbox_text input:checked~.checkmark:after{display:block}.eg_lightbox_chkbox .chkbox_text .checkmark:after{left:5px;top:2px;width:4px;height:8px;border:solid white;border-width:0 2px 2px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}\n'),s.dispatch({rootElement:t,client:o.toUpperCase(),funnel_entry:n,SDK_Callback:i,sdk_redirect_url:r||location.href,currentPage:a,campaignId:c||"1730813301_1730813301667",campaignName:l||"Article_Bottom_Banner_Mweb_AMP",campaignType:d||"onboarding",congratulatePopup:u,obUserName:p,obUserImg:g}),t.innerHTML="",((e,t)=>{const o=document.createElement("link");o.href=e,o.rel="stylesheet",document.head.appendChild(o),o.onload=()=>{t&&t()},o.onerror=()=>{console.error(`Failed to load stylesheet: ${e}`)}})("https://www.hindustantimes.com/ht-img/sso/prod/onboarding/css/Onboard.css",(()=>{t.append(Pe(e.currentPage))}))}}}));
